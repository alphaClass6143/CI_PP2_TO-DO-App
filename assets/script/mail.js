/**
 * Sends newsletter email
 * Code structure mostly generated by EmailJS
 * Notifications have been added
 */

document.querySelector("#newsletter-form").addEventListener('submit', function(event) {
   event.preventDefault();

   let button = document.querySelector("#signup-btn").value = "Sending...";

   const serviceID = 'service_0h6v5dc';
   const templateID = 'template_u63b9wu';

    //Send emailJS request
   emailjs.sendForm(serviceID, templateID, this)
    .then(() => {
        //Success response
        createNotification("Subscription successful!", NOTIFICATION_TYPES.success);
        button.value = "Success!";
        toggleNewsletterModal();
        button.value = "Subscribe";

    }, (err) => {
        //Error response
        createNotification(err.message, NOTIFICATION_TYPES.warning);
        console.log(JSON.stringify(err));
    });
});